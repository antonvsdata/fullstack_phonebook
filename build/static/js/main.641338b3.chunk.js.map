{"version":3,"sources":["components/Contacts.js","components/Filter.js","components/PersonForm.js","services/persons.js","components/Message.js","components/App.js","index.js"],"names":["Contact","person","removePerson","name","number","onClick","Contacts","persons","map","key","Filter","value","changer","onChange","PersonForm","submit","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","toData","response","data","axios","get","then","newObject","post","id","put","delete","Message","message","color","msgStyle","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","useState","setPersons","setNewName","setNewNumber","searchString","setSearchString","setMessage","errorMessage","setErrorMessage","useEffect","personService","initialPersons","shownPersons","filter","toLowerCase","includes","event","target","preventDefault","names","newPerson","window","confirm","personToUpdate","idToUpdate","find","updatedPerson","updateIndex","findIndex","newPersons","catch","error","setTimeout","updatePerson","addedPerson","concat","personToRemove","ReactDOM","render","document","getElementById"],"mappings":"sMAEMA,EAAU,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,OAAQC,EAAmB,EAAnBA,aACzB,OACE,6BACE,8BACGD,EAAOE,KADV,IACiBF,EAAOG,OAAQ,KAEhC,4BAAQC,QAASH,EAAaD,IAA9B,YAWSK,EANE,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,QAASL,EAAmB,EAAnBA,aAC3B,OAAOK,EAAQC,KAAI,SAACP,GAAD,OACjB,kBAAC,EAAD,CAASQ,IAAKR,EAAOE,KAAMF,OAAQA,EAAQC,aAAcA,QCJ9CQ,EATA,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,QACvB,OACE,6BACE,oDACA,2BAAOD,MAAOA,EAAOE,SAAUD,MCkBtBE,EAtBI,SAAC,GAMb,IALLC,EAKI,EALJA,OACAC,EAII,EAJJA,QACAC,EAGI,EAHJA,iBACAC,EAEI,EAFJA,UACAC,EACI,EADJA,mBAEA,OACE,0BAAMC,SAAUL,GACd,sCACQ,2BAAOJ,MAAOK,EAASH,SAAUI,KAEzC,wCACU,2BAAON,MAAOO,EAAWL,SAAUM,KAE7C,6BACE,4BAAQE,KAAK,UAAb,U,gBChBFC,EAAU,eAEVC,EAAS,SAACC,GAAD,OAAcA,EAASC,MAsBvB,EApBA,WAEb,OADgBC,IAAMC,IAAIL,GACXM,KAAKL,IAkBP,EAfA,SAACM,GAEd,OADgBH,IAAMI,KAAKR,EAASO,GACrBD,KAAKL,IAaP,EAVA,SAACQ,EAAIF,GAElB,OADgBH,IAAMM,IAAN,UAAaV,EAAb,YAAwBS,GAAMF,GAC/BD,KAAKL,IAQP,EALA,SAACQ,GAEd,OADgBL,IAAMO,OAAN,UAAgBX,EAAhB,YAA2BS,IAC5BH,KAAKL,ICHPW,EAlBC,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,MAC1B,GAAgB,OAAZD,EACF,OAAO,KAGT,IAAME,EAAW,CACfD,MAAOA,EACPE,WAAY,YACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,IAGhB,OAAO,yBAAKC,MAAOP,GAAWF,IC4GjBU,EAtHH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTvC,EADS,KACAwC,EADA,OAEcD,mBAAS,IAFvB,mBAET9B,EAFS,KAEAgC,EAFA,OAGkBF,mBAAS,IAH3B,mBAGT5B,EAHS,KAGE+B,EAHF,OAIwBH,mBAAS,IAJjC,mBAITI,EAJS,KAIKC,EAJL,OAKcL,mBAAS,MALvB,mBAKTX,EALS,KAKAiB,EALA,OAMwBN,mBAAS,MANjC,mBAMTO,EANS,KAMKC,EANL,KA0EhBC,qBALiB,WACfC,IAAuB5B,MAAK,SAAC6B,GAC3BV,EAAWU,QAGK,IAEpB,IAaMC,EACa,KAAjBR,EACI3C,EACAA,EAAQoD,QAAO,SAAC1D,GAAD,OACbA,EAAOE,KAAKyD,cAAcC,SAASX,EAAaU,kBAGxD,OACE,6BACE,yCACA,kBAAC,EAAD,CAASzB,QAASA,EAASC,MAAM,UACjC,kBAAC,EAAD,CAASD,QAASkB,EAAcjB,MAAM,QACtC,6BACE,kBAAC,EAAD,CAAQzB,MAAOuC,EAActC,QArCR,SAACkD,GAC1BX,EAAgBW,EAAMC,OAAOpD,WAsC3B,yCACA,kBAAC,EAAD,CACEI,OA1EY,SAAC+C,GACjBA,EAAME,iBACN,IAAMC,EAAQ1D,EAAQC,KAAI,SAACP,GAAD,OAAYA,EAAOE,QACvC+D,EAAY,CAChB/D,KAAMa,EACNZ,OAAQc,GAGN+C,EAAMJ,SAAS7C,GACImD,OAAOC,QAAP,UAChBF,EAAU/D,KADM,0EAhCJ,SAACkE,GACpB,IAAMC,EAAa/D,EAAQgE,MACzB,SAACtE,GAAD,OAAYA,EAAOE,OAASkE,EAAelE,QAC3C4B,GACFyB,EACUc,EAAYD,GACnBzC,MAAK,SAAC4C,GACL,IAAMC,EAAclE,EAAQmE,WAC1B,SAACzE,GAAD,OAAYA,EAAO8B,KAAOyC,EAAczC,MAEpC4C,EAAU,YAAOpE,GACvBoE,EAAWF,GAAeD,EAC1BzB,EAAW4B,MAEZC,OAAM,SAACC,GACNvB,EAAgB,GAAD,OACVe,EAAelE,KADL,0CAGf2E,YAAW,kBAAMxB,EAAgB,QAAO,QAkBxCyB,CAAab,GAIfV,EAAqBU,GAAWtC,MAAK,SAACoD,GACpCjC,EAAWxC,EAAQ0E,OAAOD,IAC1B5B,EAAW,SAAD,OAAU4B,EAAY7E,KAAtB,kBACV2E,YAAW,kBAAM1B,EAAW,QAAO,SAuDnCpC,QAASA,EACTC,iBAnDmB,SAAC6C,GACxBd,EAAWc,EAAMC,OAAOpD,QAmDpBO,UAAWA,EACXC,mBAjDqB,SAAC2C,GAC1Bb,EAAaa,EAAMC,OAAOpD,UAkDxB,uCACA,kBAAC,EAAD,CAAUJ,QAASmD,EAAcxD,aArChB,SAACgF,GACpB,OAAO,WAEL,IADqBf,OAAOC,QAAP,iBAAyBc,EAAe/E,KAAxC,MAEnB,OAAO,KAETqD,EAAqB0B,EAAenD,IAAIH,MAAK,WAC3CmB,EAAWxC,EAAQoD,QAAO,SAAC1D,GAAD,OAAYA,EAAO8B,KAAOmD,EAAenD,gBCtF3EoD,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.641338b3.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Contact = ({ person, removePerson }) => {\r\n  return (\r\n    <div>\r\n      <span>\r\n        {person.name} {person.number}{\" \"}\r\n      </span>\r\n      <button onClick={removePerson(person)}>delete</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Contacts = ({ persons, removePerson }) => {\r\n  return persons.map((person) => (\r\n    <Contact key={person.name} person={person} removePerson={removePerson} />\r\n  ));\r\n};\r\n\r\nexport default Contacts;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ value, changer }) => {\r\n  return (\r\n    <div>\r\n      <span>filter shown with </span>\r\n      <input value={value} onChange={changer} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  submit,\r\n  newName,\r\n  handleNameChange,\r\n  newNumber,\r\n  handleNumberChange,\r\n}) => {\r\n  return (\r\n    <form onSubmit={submit}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst toData = (response) => response.data;\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(toData);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(toData);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then(toData);\r\n};\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(toData);\r\n};\r\n\r\nexport default { getAll, create, update, remove };\r\n","import React from \"react\";\r\n\r\nconst Message = ({ message, color }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  const msgStyle = {\r\n    color: color,\r\n    background: \"lightgrey\",\r\n    fontSize: 20,\r\n    borderStyle: \"solid\",\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10,\r\n  };\r\n\r\n  return <div style={msgStyle}>{message}</div>;\r\n};\r\n\r\nexport default Message;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Contacts from \"./Contacts\";\r\nimport Filter from \"./Filter\";\r\nimport PersonForm from \"./PersonForm\";\r\nimport personService from \"../services/persons\";\r\nimport Message from \"./Message\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [searchString, setSearchString] = useState(\"\");\r\n  const [message, setMessage] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  // Update persons phone number both in database and in visible phonebook\r\n  const updatePerson = (personToUpdate) => {\r\n    const idToUpdate = persons.find(\r\n      (person) => person.name === personToUpdate.name\r\n    ).id;\r\n    personService\r\n      .update(idToUpdate, personToUpdate)\r\n      .then((updatedPerson) => {\r\n        const updateIndex = persons.findIndex(\r\n          (person) => person.id === updatedPerson.id\r\n        );\r\n        const newPersons = [...persons];\r\n        newPersons[updateIndex] = updatedPerson;\r\n        setPersons(newPersons);\r\n      })\r\n      .catch((error) => {\r\n        setErrorMessage(\r\n          `${personToUpdate.name} has already been removed from server`\r\n        );\r\n        setTimeout(() => setErrorMessage(null), 3000);\r\n      });\r\n  };\r\n\r\n  // Attempt to add a new person\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    const names = persons.map((person) => person.name);\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n    // If person is found, phone number can be updated\r\n    if (names.includes(newName)) {\r\n      const confirmation = window.confirm(\r\n        `${newPerson.name} is already in the phonebook, replace the old number with a new one?`\r\n      );\r\n      if (confirmation) {\r\n        updatePerson(newPerson);\r\n      }\r\n      // Else a new entry is added\r\n    } else {\r\n      personService.create(newPerson).then((addedPerson) => {\r\n        setPersons(persons.concat(addedPerson));\r\n        setMessage(`Added ${addedPerson.name} to phonebook`);\r\n        setTimeout(() => setMessage(null), 3000);\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleSearchChange = (event) => {\r\n    setSearchString(event.target.value);\r\n  };\r\n\r\n  const dataHook = () => {\r\n    personService.getAll().then((initialPersons) => {\r\n      setPersons(initialPersons);\r\n    });\r\n  };\r\n  useEffect(dataHook, []);\r\n\r\n  const removePerson = (personToRemove) => {\r\n    return () => {\r\n      const confirmation = window.confirm(`Delete ${personToRemove.name}?`);\r\n      if (!confirmation) {\r\n        return null;\r\n      }\r\n      personService.remove(personToRemove.id).then(() => {\r\n        setPersons(persons.filter((person) => person.id !== personToRemove.id));\r\n      });\r\n    };\r\n  };\r\n\r\n  // Filter persons, case insensitive match to search string\r\n  const shownPersons =\r\n    searchString === \"\"\r\n      ? persons\r\n      : persons.filter((person) =>\r\n          person.name.toLowerCase().includes(searchString.toLowerCase())\r\n        );\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Message message={message} color=\"green\" />\r\n      <Message message={errorMessage} color=\"red\" />\r\n      <div>\r\n        <Filter value={searchString} changer={handleSearchChange} />\r\n      </div>\r\n      <h2>Add a new</h2>\r\n      <PersonForm\r\n        submit={addPerson}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Contacts persons={shownPersons} removePerson={removePerson} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}